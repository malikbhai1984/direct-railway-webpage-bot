


<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Football Predictions Live</title>
<style>
body { font-family: Arial, sans-serif; background:#f4f4f4; padding:20px; }
h1 { text-align:center; }
.match { background:white; padding:15px; margin:10px auto; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.2); max-width:600px; }
h2 { margin:0 0 5px 0; font-size:18px; }
.prob { font-size:14px; margin:3px 0; }
.overunder, .strong { margin-top:5px; font-size:13px; }
</style>
</head>
<body>
<h1>⚽ Live Football Predictions</h1>
<div id="matches"></div>

<script>
// SSE Connection
const evtSource = new EventSource("/events");
evtSource.onmessage = function(event) {
    const data = JSON.parse(event.data);
    const container = document.getElementById("matches");
    container.innerHTML = "";

    data.matches.forEach(match=>{
        const div = document.createElement("div");
        div.className = "match";
        div.innerHTML = `
            <h2>${match.home} vs ${match.away} | xG: ${match.xG.total}</h2>
            <div class="prob">Winner Prob → Home: ${match.winnerProb.home}% | Draw: ${match.winnerProb.draw}% | Away: ${match.winnerProb.away}%</div>
            <div class="prob">BTTS: ${match.bttsProb}% | Last 10 min goal chance: ${match.last10Prob}%</div>
            <div class="overunder">Over/Under: ${Object.entries(match.overUnder).map(([k,v])=>`${k}: ${v}%`).join(", ")}</div>
            <div class="strong">Strong Markets: ${match.strongMarkets.map(m=>`${m.market}(${m.prob}%)`).join(", ")}</div>
        `;
        container.appendChild(div);
    });
};
</script>
</body>
</html>
